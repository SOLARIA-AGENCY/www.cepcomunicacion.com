# Monitoring Stack Environment Variables
# Copy this file to .env and configure with your actual values

# ==============================================================================
# Grafana Configuration
# ==============================================================================

# Grafana admin password (REQUIRED - change immediately!)
# Generate strong password: openssl rand -base64 32
GRAFANA_PASSWORD=ChangeMe123!

# ==============================================================================
# Database Configuration (PostgreSQL)
# ==============================================================================
# These should match your main application database credentials

POSTGRES_USER=cepcomunicacion
POSTGRES_PASSWORD=wGWxjMYsUWSBvlqw2Ck9KU2BKUI=
POSTGRES_DB=cepcomunicacion
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# ==============================================================================
# Redis Configuration
# ==============================================================================

# Redis password (leave empty if no password)
REDIS_PASSWORD=

# Redis host and port
REDIS_HOST=redis
REDIS_PORT=6379

# ==============================================================================
# SMTP Configuration (for email alerts)
# ==============================================================================

# SMTP server settings
SMTP_HOST=smtp.gmail.com:587
SMTP_USER=alerts@cepcomunicacion.com
SMTP_PASSWORD=your-smtp-app-password
SMTP_FROM=alerts@cepcomunicacion.com

# TLS settings
SMTP_REQUIRE_TLS=true

# Alert recipients
ALERT_EMAIL_ONCALL=oncall@cepcomunicacion.com
ALERT_EMAIL_PLATFORM=platform@cepcomunicacion.com
ALERT_EMAIL_BACKEND=backend@cepcomunicacion.com
ALERT_EMAIL_MARKETING=marketing@cepcomunicacion.com
ALERT_EMAIL_CTO=cto@cepcomunicacion.com

# ==============================================================================
# Slack Integration (optional)
# ==============================================================================

# Slack webhook URL for alerts
# Get from: https://api.slack.com/apps → Your App → Incoming Webhooks
SLACK_WEBHOOK_URL=

# Slack channels
SLACK_CHANNEL_CRITICAL=#alerts-critical
SLACK_CHANNEL_WARNING=#alerts-warning
SLACK_CHANNEL_INFO=#alerts-info

# ==============================================================================
# PagerDuty Integration (optional)
# ==============================================================================

# PagerDuty integration key
# Get from: PagerDuty → Configuration → Services → Your Service → Integrations
PAGERDUTY_SERVICE_KEY=

# PagerDuty routing key (for Events API v2)
PAGERDUTY_ROUTING_KEY=

# ==============================================================================
# Google Analytics 4 (optional - for Web Vitals tracking)
# ==============================================================================

# GA4 Measurement ID
# Format: G-XXXXXXXXXX
NEXT_PUBLIC_GA4_MEASUREMENT_ID=

# GA4 API Secret (for Measurement Protocol)
# Get from: GA4 Admin → Data Streams → Your Stream → Measurement Protocol API secrets
GA4_API_SECRET=

# ==============================================================================
# Meta Pixel (optional - for tracking verification)
# ==============================================================================

# Meta Pixel ID
NEXT_PUBLIC_META_PIXEL_ID=

# Meta Graph API Access Token (for server-side events)
META_ACCESS_TOKEN=

# ==============================================================================
# Plausible Analytics (optional - privacy-first alternative)
# ==============================================================================

# Plausible domain
PLAUSIBLE_DOMAIN=cepcomunicacion.com

# Plausible API URL (if self-hosted)
PLAUSIBLE_API_URL=https://plausible.io

# ==============================================================================
# Monitoring Stack Configuration
# ==============================================================================

# Prometheus retention period
PROMETHEUS_RETENTION_TIME=30d
PROMETHEUS_RETENTION_SIZE=10GB

# Loki retention period
LOKI_RETENTION_PERIOD=30d

# Alertmanager external URL
ALERTMANAGER_EXTERNAL_URL=https://alerts.cepcomunicacion.com

# Grafana external URL
GRAFANA_EXTERNAL_URL=https://monitor.cepcomunicacion.com

# ==============================================================================
# Security Settings
# ==============================================================================

# Enable authentication for Prometheus/Alertmanager (via reverse proxy)
ENABLE_AUTH=true

# Allowed IP ranges for monitoring access (comma-separated CIDR)
ALLOWED_IPS=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# Enable HTTPS (requires reverse proxy with SSL certificates)
ENABLE_HTTPS=true

# ==============================================================================
# Resource Limits
# ==============================================================================

# Prometheus memory limit
PROMETHEUS_MEMORY_LIMIT=1g

# Grafana memory limit
GRAFANA_MEMORY_LIMIT=512m

# Loki memory limit
LOKI_MEMORY_LIMIT=512m

# ==============================================================================
# Backup Configuration
# ==============================================================================

# Backup directory
BACKUP_DIR=/var/backups/cepcomunicacion/monitoring

# Backup retention (days)
BACKUP_RETENTION_DAYS=7

# Enable automated backups (cron schedule)
ENABLE_BACKUPS=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM

# ==============================================================================
# Advanced Settings (don't change unless you know what you're doing)
# ==============================================================================

# Prometheus scrape interval (seconds)
PROMETHEUS_SCRAPE_INTERVAL=15s

# Prometheus evaluation interval (seconds)
PROMETHEUS_EVALUATION_INTERVAL=15s

# Loki log ingestion rate limit (MB)
LOKI_INGESTION_RATE_MB=10

# Loki burst size (MB)
LOKI_BURST_SIZE_MB=20

# Node Exporter enabled collectors
NODE_EXPORTER_COLLECTORS=cpu,meminfo,diskstats,netdev,filesystem,loadavg

# ==============================================================================
# Feature Flags
# ==============================================================================

# Enable Business Metrics collection
ENABLE_BUSINESS_METRICS=true

# Enable Core Web Vitals tracking
ENABLE_WEB_VITALS=true

# Enable Uptime Monitoring
ENABLE_UPTIME_MONITORING=true

# Enable Log Aggregation
ENABLE_LOG_AGGREGATION=true

# Enable Distributed Tracing (future feature)
ENABLE_TRACING=false
